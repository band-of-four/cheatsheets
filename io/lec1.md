# Обобщенная схема вычислительной системы

<img src="https://sun9-44.userapi.com/impf/TAHw3m9zblbtRT1ZfNK509HN65klzKS5PAJSBw/QVVafThW4U0.jpg?size=1036x532&quality=96&proxy=1&sign=4b637c6bcc3efff452aba31c87da1ace&type=album">

Системы ввода-вывода достаточно разветвленная: помимо процессора и ОП есть куча устройств, которые отвечают за общение с внешним миром.

На картинке изображена шинная архитектура. К шине все подключается (процессор, память, внешние устройства). Причем ВУ не напрямую подключаются к ядру (процессору/памяти),  а через 
посредников, которые позволяют конвертировать протоколы, совмещать физически через контроллеры ввода-вывода или процессоры ввода-вывода. 

Следует различать на уровне программного и аппаратного обеспечения обмен с контроллеров io/ процессором io и с самим периферийным устройством.

Общение с контроллерами ввода-вывода может осуществлятся при помощи памяти, например, когда на С при помощи указателя что-то записывается в определенную ячейку памяти. Если память 
разделенная, то процессор имеет определенные коменды.

Подводя подытог: 

Вычислительная система делится на две части:

• __Вычислительное ядро__ (то оборудование и программные
средства, которые непосредственно участвуют в решении
заданной задачи).

• __Система ввода вывода__ (элементы, обеспечивающие
общение вычислительного ядра с внешней средой,
«органы чувств» ВС).

При проектировании систем ввода-вывода следует учитывать где, в каких условиях будет использоваться система и задумываться об эргономических свойствах системы в целом

# Классификация процессоров

Процессоры различают:

1. По типу обрабатываемых данных, по назначению:

• Универсальные (общего назначения)

• Специализированные (например, для цифровой обработки
сигналов)

_специализированные -- для всяких спец. задач. Всякие графические ускорители (в те времена, когда на них еще не осуществлялись какие-то действия общего назначения)
 
2. По типу задач:

• Центральные

• Периферийные

• Сервисные

_центральные -- всякие интелы, амд, которые стоят и обрабатывают что-то; периферийные -- те, которые общаются с периферийными устройствами; сервисные -- те, которые делают обслуживающие вещи, например, менеджер памяти в снк, который отвечает за обеспечение виртуальной памяти, за общение с кэшем, за их непротиворечивость_

3. По типу управления вычислительным процессом: 

• Непрограммируемые, не программно реализованные.

• Программируемые и программно реализованные.

• Непрограммируемые, но программно реализованные.

• Программируемые, но не программно реализованные.

_процессор в целом - это устройство которое обрабатывает данные. Различаются процессоры: программируемые/непрограммируемые и программно реализованные/не программно реализованные. Таким образом какой-нибудь текстовый процессор, который обрабатывает данные в виде программы будет программно реализованным; непрограммируемые - это те, в которых нельзя изменить их программу, например, контроллеры ввода-вывода, которые общаются с внешними устройствами будут непрограммируемыми._

# Память ВС

Для системы ввода/вывода характерно то, что:

1. Память проявляется как категория внешних устройств.

2. В составе обеспечивающих устройств, применяется
буферная память, чтобы можно было выравнивать скорость
работы различных составов системы ввода/вывода. _(используется для организации асинхронного обмена, чтобы выравнивать скорость между приемником и передатчиком)_

## Критерии классификации памяти:

1. По назначению (для хранения программ, данных и т.п.).

2. По виду физического носителя (технология
производства). _ssd, жесткие диски_

3. По организации доступа (произвольный адресный,
последовательный, ассоциативный доступ).

4. По возможности записи и перезаписи.

5. По энергозависимости энергонезависимости

6. По типу интерфейса.

7. По удалённости и доступности для центрального
процессора (первичная, вторичная, третичная память).

# Контроллер ввода/вывода

__Контроллер__ - устройство, управляющее функционированием отдельных
блоков вычислительной системы и внешних устройств, например: вводом
выводом информации, доступом к памяти, к накопителям на магнитных
дисках, дисплеям. _они вообще могут работать на разных протоколах_

Контроллеры ввода
вывода (контроллеры периферийных устройств,
КВВ) делятся на:

1. Уcтройства сопряжения стандартного интерфейса ВС с интерфейсом
ВУ (функция преобразования), которые называются адаптерами;

2. Локальные устройства управления конечным оборудованием ВУ
(функция управления)

_пример, мышка -- нужно поддержать интерфейс, но при этом всю обработку можно реализовать программно на процессоре, используя контроллер в качестве сопряжения интерфейса к памяти, которую использует процессор, и какой-нить usb/bluetooth/wi-fi. в таком случае контроллер будет отправлять посылки от процессора, который управляет устройством, и конвертировать в посылки по нужному интерфейсу к этому устройству, при этом ничего не зная об этом устройстве. Т.е. контроллер не знает как двигать курсов мышки, а драйвер устройства уже будет знать, как с ней рабоать_

# Процессор ввода/вывода

__Процессор ввода/вывода (ПВВ)__ - устройство обработки данных, которое
может самостоятельно выбирать команды из памяти, имеет собственную
систему команд и ориентировано на выполнение задач взаимодействия ВС
с внешними устройствами.

## Необходимость использования ПВВ обусловлена:

• Процессор ввода вывода предназначен
для работы в рамках системы ввода
вывода с целью увеличения
производительности системы.

• Увеличение производительности
происходит за счет разгрузки
центрального процессора и
организации параллельной работы СВВ
и основного процессора.

## Примеры ПВВ:

• акселераторы 2D и 3D
графики;

• звуковая карта;

• сетевая карта.

_процессор ввода-вывода - это как контроллер, в котором можно менять и программировать функциональность. Таким образом, можно разделять контроллеры ввода-вывода и процессоры, а можно считать процессор часттным случаем контроллера, который можно программировать, менять внутреннюю прошивку. Процессоры помогают снять часть нагрузки с центрального процессора и переложить на процессор IO (например, обрабаботка каких-либо команд с какого-нибудь экрана), чаще всего они работают в режиме прямого доступа к памяти без участия самого центрального процессора._

# Интерфейс ввода/вывода

__Интерфейс ввода/вывода__

соглашение о взаимодействии объектов:
перечень средств взаимодействия, их параметры, в случае аппаратных
интерфейсов параметры сигналов, способы доступа к средствам
взаимодействия, правила взаимодействия и т.д. _под интерфейсом понимается вся экосистема передачи данных от одного устройства к другому: от характеристик линий связи, портов до протокола_

## Определение интерфейса включает:

• Описание и параметры портов взаимодействующих устройств

• Описание и параметры канала связи устройств

• Протокол взаимодействия на разных уровнях (физическом,
канальном и т.д.)

# Классификация интерфейсов по типу взаимодействующих объектов

• __Аппаратный (устройство-устройство)__  -- совокупность алгоритмов
обмена и технических средств, обеспечивающих обмен между
устройствами. Примеры: PCI, RS 232, I2C, Ethernet

• __Программный__ -- соглашение о связях в программной среде
между программными модулями. Примеры: Win32, POSIX, API
любого программного модуля (интерфейс прикладного
программирования набор функций, предоставляемый для
использования в прикладных программах).

• __Пользовательский (ВС-пользователь)__ -- сценарии, по которым
строится общение оператора с вычислительной системой, и стиль
их реализации. Примеры: интерфейс пользователя в Microsoft
Visual Studio.

## Уровни интерфейсов

<img src="https://sun9-44.userapi.com/impf/TAHw3m9zblbtRT1ZfNK509HN65klzKS5PAJSBw/QVVafThW4U0.jpg?size=1036x532&quality=96&proxy=1&sign=4b637c6bcc3efff452aba31c87da1ace&type=album">

На рисунке обозначено 4 уровня (которые можно свести к двум)

# Классификация интерфейсов по назначению

## Системы ввода/вывода

• __Внутрисистемный («A»)__ -- это группа интерфейсов, которая
обеспечивает взаимодействие компонент ядра ВС. Интерфейсы
этого уровня должны, очевидно, удовлетворять критерию
максимальной производительности, например, интерфейс между
процессором и памятью ( AXI, OCP, Wishbone)

• __Системный («B»)__ --  группа интерфейсов, сопрягающих как
элементы ядра ВС, так и элементы подсистемы ввода вывода.
Служат для развития системы (ISA, PCI, PCI Express ), т.е.
наращивания характеристик вычислительного ядра. Является
компромиссом при создании дешевой вычислительной
структуры. _при помощи нее можно подключить даже другие вычислительные системы, или какие-нибудь видеокарты_

_Внутрисистемный и системный можно обобщить до системного -- это интерфейсы которые позволяют расширить функциональность, интерфейсы между ядром и сопряжение с подсистемами, которые расширяют вычислительную мощь этой системы_

• __Уровень стандартных интерфейсов ввода вывода («C»)__ -- группа
интерфейсов, объединяющая контроллеры ввода вывода с
процессорами ввода вывода. Характеристики этих интерфейсов
сильно отличаются от характеристик первых двух групп: критерием
является удобство и эффективность управления большим числом
периферийных устройств. Примеры: интерфейс SCSI, SAS.

• __Уровень малых периферийных интерфейсов («D»)__ -- сопрягают
контроллеры (процессоры) ввода вывода непосредственно с
внешними устройствами (RS 232, SPI, Centronics , SATA). Для каждого
внешнего устройства требуется свой оптимальный интерфейс.

_Уровни С и D можно объединить в уровень "периферийных интерфейсов"_

_Все эти разграничения по уровням на самом деле не строгие и больше нужны есть нужно разграничить задачи инженеров по уровням 

# Способы обмена данными между устройствами

• Программноуправляемые

- Синхронный обмен _при синхронном обмене процессор никак не опрашивает устройство. синхронност достигается за счет того, что процессор либо знает с какой скоростью работает контроллер, либо работает с ним на одинаковых скоростях. Например, процессор может передавать что-то в контроллер раз в 5 секунд и это будет считаться синхронным обменом, потому что и процессор и контролер работают слаженно и оба участника всегда точно уверены, что информация дошла_

- Асинхронный с программной проверкой готовности
(программный полинг , «по опросу»)

- Асинхронный с аппаратной проверкой готовности (обмен по
прерыванию).

_в случаях асинхронной работы, неизвестно в какие моменты времени устройство способно принять данные и необходимо либо программно опрашивать готовность устройства, либо осуществлять аппаратную проверку при помощи контроллера прерываний и работать по прерыванию, когда готовое устройство говорит, что оно готово, а процессор при этом аппаратно переключается на обработчик прерываний_

• В режиме прямого доступа к памяти (ПДП). 
_на самом деле тоже относится к асинхронному, но в некоторой литературе его выносят в отденьный пункт. В случае с ПДП устройство также сообщает о готовности, но при этом не процессор занимается записью в память, а этим занимается или контроллер, или процессор ввода-вывода, записывая анные в память напрямую_

_ПДП тоже может являтся асинхронным обменом с программной проверкой готовности, только жта программа будет назодится в процессоре ввода-вывода._

_Самому процессору необходимо тоже выполнять какую-то работу при ПДП. Когда устройство готово что-то передать процессор ввода-вывода понимает, что нужно что-то записать в память и  посылает сигнал прерывания в ЦП, а ЦП, в свою очередь, отдает управление системным интерфейсам к памяти к процессору ввода-вывода. Таким образом процессор и учавствует в ПДП на первой стадии. Дальнейшее перекачивание данных уже осуществляется без ЦП_

_Весь мир у нас асинхронный и сейчас чаще всего синхронный обмен используется только в высокоскоростных устройствах_

# Порт ввода/вывода

• __Порт ввода/вывода__ -- точка, через которую осуществляется
взаимодействие с каким либо блоком в системе ввода вывода

• __Порт ввода/вывода__ является логической адресуемой единицей
системы ввода/вывода, которая характеризуется: адресом, форматом
данных и набором операций, которые к этому порту можно
применять.

• Взаимодействие может осуществляться как __программным__ путем, так и
__аппаратным__ (порт-разъем-устройства).

Через порты устройства взаимодействуют с друг с другом:
считывают значения входных сигналов и устанавливают значения
выходных сигналов.

<img src="https://sun9-61.userapi.com/impf/S4Q4zrVeHMGBeZXUSCp2jfVDhIy_nyO5R7BFrQ/Q3P_ekELJXo.jpg?size=548x335&quality=96&proxy=1&sign=c32b5433ff2ac8113959477be0cc1f65&type=album">

# Классификация портов ввода/вывода

## По типу сигнала

• Аналоговые

• Дискретные

# По направлению передачи сигнала

• Однонаправленные

• Двунаправленные


